# 房地产推荐多智能体系统

本系统使用多智能体架构，实现了一个智能房地产推荐系统，能够根据用户的自然语言需求推荐最匹配的房源。

## 系统架构

系统由三个智能体组成：

1. **需求Agent**：
   - 输入：用户自然语言需求
   - 输出：结构化需求（预算、区域、学区、通勤）
   - 工具：偏好问答模板、意图识别、槽位填充

2. **房源Agent**：
   - 职责：抓取/查询挂牌、成交价
   - 工具：模拟MLS/贝壳/安居客数据库、地图服务、政策库
   - 输出：市场速览与对比表

3. **匹配和推荐Agent**：
   - 职责：候选集合匹配
   - 工具：匹配算法（预算符合40%，学区符合30%，通勤符合30%）
   - 输出：每个房源的匹配度百分比并排序+解释

## 工作流程

1. 用户输入自然语言需求
2. 需求Agent解析用户输入 → 生成JSON结构化需求
3. 房源Agent使用结构化需求过滤房源 → 生成候选集合
4. 匹配推荐Agent计算候选集合与需求的匹配度，选出前N个房源 → 生成得分表和推荐理由
5. 系统向用户展示推荐结果

## 目录结构

```
src/real_estate_agents/
├── requirement_agent/       # 需求Agent实现
│   └── agent.py
├── property_agent/          # 房源Agent实现
│   └── agent.py
├── matching_agent/          # 匹配和推荐Agent实现
│   └── agent.py
├── multi_agent_system.py    # 多智能体系统协调器
├── main.py                  # 主程序入口
└── config.yml               # AIQToolkit配置文件
```

## 使用方法

1. 确保已安装所有依赖：
   ```
   pip install langchain pydantic
   ```

2. 运行主程序：
   ```
   python src/real_estate_agents/main.py
   ```

3. 输入您的购房需求，例如：
   ```
   我想在朝阳区买一套300-500万的房子，最好是朝阳实验小学的学区房，通勤时间不超过30分钟
   ```

4. 系统将分析您的需求并推荐最匹配的房源

## AIQToolkit集成

系统使用AIQToolkit框架来协调多个智能体之间的通信。配置文件`config.yml`定义了工作流，使三个智能体能够协同工作。

## 扩展功能

- 添加更多房源数据源
- 实现更复杂的需求解析
- 添加用户反馈机制
- 集成地图可视化
- 添加房源历史价格分析
